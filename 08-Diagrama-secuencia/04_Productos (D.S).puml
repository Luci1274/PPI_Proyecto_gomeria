@startuml
title Diagrama de Secuencia - Gestión de Productos

actor Administrador
participant "Sistema" as Sistema
database "Base de Datos" as DB

== Registro de Producto ==

Administrador -> Sistema: Registrar producto

alt Producto existe
    Sistema -> Administrador: Notifica y ofrece actualizar stock
else Producto no existe
    Sistema -> Administrador: Notifica y ofrece registrar nuevo producto
end

Sistema -> Administrador: Mostrar formulario de registro

loop Hasta completar datos
    Sistema -> Administrador: Mostrar mensaje de error\nSolicitar completar datos
end

Administrador -> Sistema: Ingresar datos del producto
Sistema -> DB: Almacenar datos del producto

alt Error en almacenamiento
    DB --> Sistema: Aviso de error
    Sistema --> Administrador: Mostrar mensaje de error
else Almacenamiento exitoso
    DB --> Sistema: Confirmación de almacenamiento
    Sistema --> Administrador: Mostrar mensaje de confirmación
end

== Consulta de Productos ==

Administrador -> Sistema: Solicitar lista de productos
Sistema -> Administrador: Mostrar lista de productos\n(en stock y faltantes)

== Modificación de Productos ==

Administrador -> Sistema: Modificar precio del producto
Sistema -> DB: Actualizar precio del producto
DB --> Sistema: Confirmación de actualización
Sistema --> Administrador: Mostrar mensaje de confirmación

opt Producto fuera de venta
    Administrador -> Sistema: Marcar producto como fuera de venta
    Sistema -> DB: Actualizar estado del producto
    DB --> Sistema: Confirmación de actualización
    Sistema --> Administrador: Mostrar mensaje de confirmación
end

@enduml
