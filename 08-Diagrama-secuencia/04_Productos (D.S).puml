@startuml
title Diagrama de Secuencia - Gestión de Productos

actor Administrador
participant "Sistema" as Sistema
participant "catalogo" as C
participant "multiobjeto" as MO

== Registro de Producto ==

Administrador -> Sistema: Registrar producto (nombre, cantidad, precio)
activate Sistema

alt Producto existe
    Sistema -> Administrador: Notifica y ofrece actualizar stock
else Producto no existe
    Sistema -> Administrador: Notifica y ofrece registrar nuevo producto
end

Sistema -> Administrador: Mostrar formulario de registro

loop Hasta completar datos
    Sistema -> Administrador: Mostrar mensaje de error\nSolicitar completar datos
end
deactivate Sistema

Administrador -> Sistema: Ingresar datos del producto
activate Sistema
Sistema -> MO: Almacenar datos del producto
activate MO

alt Error en almacenamiento
    MO --> Sistema: Aviso de error
    deactivate MO
    Sistema --> Administrador: Mostrar mensaje de error
else Almacenamiento exitoso
    MO --> Sistema: Confirmación de almacenamiento
    deactivate MO
    Sistema --> Administrador: Mostrar mensaje de confirmación
end
deactivate Sistema

== Consulta de Productos ==

Administrador -> Sistema: Solicitar lista de productos
activate Sistema
Sistema -> C: Leer lista de productos
activate C
C --> Sistema: Lista de productos
deactivate C
Sistema --> Administrador: Mostrar lista de productos\n(en stock y faltantes)
deactivate Sistema

== Modificación de Productos ==

Administrador -> Sistema: Modificar precio del producto
activate Sistema
Sistema -> MO: Actualizar precio del producto
activate MO
MO --> Sistema: Confirmación de actualización
deactivate MO
Sistema --> Administrador: Mostrar mensaje de confirmación
deactivate Sistema

opt Producto fuera de venta
    Administrador -> Sistema: Marcar producto como fuera de venta
    activate Sistema
    Sistema -> MO: Actualizar estado del producto
    activate MO
    MO --> Sistema: Confirmación de actualización
    deactivate MO
    Sistema --> Administrador: Mostrar mensaje de confirmación
    
end

@enduml
