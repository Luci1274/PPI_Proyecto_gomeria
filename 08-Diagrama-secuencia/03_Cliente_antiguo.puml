@startuml cliente_antiguo

title Diagrama de Secuencia: Cliente Antiguo

actor Administrador as Admin
participant Sistema as System
participant Catálogo as Cat
participant Multiobjeto as MULT

== Inicio ==
Admin -> System: Ingresar_pantalla_cliente_antiguo()
activate System
System -> Cat: Consultar_clientes_antiguos()
activate Cat
Cat --> System: Devolver_listado_clientes()
deactivate Cat
System --> Admin: Visualizar_listado_clientes()
deactivate System

== Registrar Cliente Antiguo ==
Admin -> System: Registrar_cliente_antiguo()
activate System
System --> Admin: Mostrar_formulario()
Admin -> System: Ingresar_datos_cliente(nombre, CUIT_CUIL, telefono, email)

alt Datos válidos
    System -> Cat: Validar_cliente_existente(CUIT_CUIL)
    activate Cat
    Cat --> System: Resultado_validación
    deactivate Cat

    alt Cliente no existe
        create Cliente
        System -> Cliente: Crear(nombre, CUIT_CUIL, telefono, email)
        activate Cliente
        System -> MULT: Guardar_cliente(Cliente)
        activate MULT
        MULT --> System: Confirmar_guardado()
        deactivate MULT
        System --> Admin: Mostrar_confirmacion("Cliente registrado correctamente")
        destroy Cliente
    else Cliente ya existente
        System --> Admin: Mostrar_error("El cliente ya está registrado")
    end

else Datos inválidos
    System --> Admin: Mostrar_error("Error de validación de datos")
end
deactivate System

opt Admin cancela formulario
    Admin -> System: Seleccionar_cancelar()
    activate System
    System --> Admin: Volver_listado_clientes()
    deactivate System
end

== Modificar o Eliminar Cliente ==
loop hasta operación válida
    Admin -> System: Modificar_o_eliminar_cliente()
    activate System
    System -> Cat: Validar_operacion_cliente()
    activate Cat
    Cat --> System: Resultado_validación
    deactivate Cat

    alt Datos válidos
        create ClienteActualizado
        System -> ClienteActualizado: Crear(datos_actualizados)
        activate ClienteActualizado
        System -> MULT: Actualizar_datos_cliente(ClienteActualizado)
        activate MULT
        MULT --> System: Confirmar_actualizacion()
        deactivate MULT
        System --> Admin: Mostrar_confirmacion("Cliente actualizado correctamente")
        destroy ClienteActualizado
    else Error al validar datos
        System --> Admin: Mostrar_error("Error en los datos del cliente")
    end
    deactivate System
end

@enduml
