@startuml cliente_antiguo

title Diagrama de Secuencia: Cliente Antiguo

actor Administrador 
participant Sistema
participant Catálogo as Cat
participant Multiobjeto as MULT

== Inicio ==
Administrador -> Sistema: Ingresar_pantalla_cliente_antiguo()
activate Sistema
Sistema -> Cat: Consultar_clientes_antiguos()
activate Cat
Cat --> Sistema: Devolver_listado_clientes()
deactivate Cat
Sistema --> Administrador: Visualizar_listado_clientes()
deactivate Sistema

== Registrar Cliente Antiguo ==
Administrador -> Sistema: Registrar_cliente_antiguo()
activate Sistema
Sistema --> Administrador: Mostrar_formulario()
Administrador -> Sistema: Ingresar_datos_cliente(nombre, CUIT_CUIL, telefono, email)

alt Datos válidos
    Sistema -> Cat: Validar_cliente_existente(CUIT_CUIL)
    activate Cat
    Cat --> Sistema: Resultado_validación
    deactivate Cat

    alt Cliente no existe
        create Cliente
        Sistema -> Cliente: Crear(nombre, CUIT_CUIL, telefono, email)
        activate Cliente
        Sistema -> MULT: Guardar_cliente(Cliente)
        activate MULT
        MULT --> Sistema: Confirmar_guardado()
        deactivate MULT
        Sistema --> Administrador: Mostrar_confirmacion("Cliente registrado correctamente")
        destroy Cliente
    else Cliente ya existente
        Sistema --> Administrador: Mostrar_error("El cliente ya está registrado")
    end

else Datos inválidos
    Sistema --> Administrador: Mostrar_error("Error de validación de datos")
end
deactivate Sistema

opt Administrador cancela formulario
    Administrador -> Sistema: Seleccionar_cancelar()
    activate Sistema
    Sistema --> Administrador: Volver_listado_clientes()
    deactivate Sistema
end

== Modificar o Eliminar Cliente ==
loop hasta operación válida
    Administrador -> Sistema: Modificar_o_eliminar_cliente()
    activate Sistema
    Sistema -> Cat: Validar_operacion_cliente()
    activate Cat
    Cat --> Sistema: Resultado_validación
    deactivate Cat

    alt Datos válidos
        create ClienteActualizado
        Sistema -> ClienteActualizado: Crear(datos_actualizados)
        activate ClienteActualizado
        Sistema -> MULT: Actualizar_datos_cliente(ClienteActualizado)
        activate MULT
        MULT --> Sistema: Confirmar_actualizacion()
        deactivate MULT
        Sistema --> Administrador: Mostrar_confirmacion("Cliente actualizado correctamente")
        destroy ClienteActualizado
    else Error al validar datos
        Sistema --> Administrador: Mostrar_error("Error en los datos del cliente")
    end
    deactivate Sistema
end

@enduml
