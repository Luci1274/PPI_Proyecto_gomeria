@startuml proveedor

title Diagrama de Secuencia: Registrar Proveedor

actor Administrador
participant Sistema
participant "cat_prov:Catálogo_prov" as Cat_prov
participant "formulario:FormularioProveedor" as Formulario
participant "multi:Multiobjeto" as MULT

== Registro de nuevo proveedor ==

loop hasta datos válidos
    Administrador -> Sistema: Ingresar_datos_proveedor(nombre, CUIT, teléfono, email)
    activate Sistema
    Sistema -> Cat_prov: Validar_datos(CUIT, email, teléfono)
    activate Cat_prov
    Cat_prov --> Sistema: Resultado_validación
    deactivate Cat_prov

    create "proveedor:Proveedor" as P
    Sistema -> P: Inicializar(nombre, CUIT, teléfono, email)
    activate P
    Sistema -> MULT: Guardar_proveedor(proveedor)
    activate MULT
    MULT --> Sistema: OK
    deactivate MULT
    Sistema --> Administrador: <<"Proveedor registrado exitosamente">>
    deactivate P
    opt Datos inválidos
        Sistema --> Administrador: <<"Datos inválidos">>
        deactivate Sistema
    end
end

== Modificación o eliminación ==
opt Modificar o eliminar proveedor
    Administrador -> Sistema: Seleccionar proveedor y modificar/eliminar
    activate Sistema
    Sistema -> Cat_prov: Obtener_datos_proveedor(CUIT)
    activate Cat_prov
    Cat_prov --> Sistema: Datos actuales
    deactivate Cat_prov
    Sistema -> MULT: Validar_cambios()
    activate MULT
    alt Cambios válidos
        Sistema -> MULT: Guardar_cambios()
        MULT --> Sistema: OK
        Sistema --> Administrador: <<"Cambios guardados exitosamente">>
    else Error de validación
        MULT --> Sistema: Error
        Sistema --> Administrador: <<"Error al guardar cambios">>
        deactivate MULT
        deactivate Sistema    
    end
end

@enduml